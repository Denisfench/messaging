(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{162:function(e,t,a){e.exports=a(307)},167:function(e,t,a){},168:function(e,t,a){},189:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(40),c=a.n(o),l=(a(167),a(168),a(169),a(170),a(44)),i=a(36),s=a(37),u=a.n(s),m=a(25),p=a(26),d=a(27),h=a(28),v=a(29),f=a(53),b=a.n(f),y=a(315),E=a(313);a(189);var g=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(l.b,{to:"/"},r.a.createElement("div",null,r.a.createElement("h2",null,e.title))))},k=a(47),w=a(152),j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={eventDetails:a.props.data},a.background={Low:"light",Medium:"warning",High:"danger"},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.eventDetails;return r.a.createElement(k.a,{bg:this.background[e[8]],className:"m-3"},r.a.createElement(k.a.Header,{as:"h5"},e[6]),r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,e[7]),r.a.createElement(k.a.Text,null,"".concat(e[3],", ").concat(e[4]," ").concat(e[2],", ").concat(e[5]," at ").concat(e[1]),r.a.createElement("br",null),"Priority: ".concat(e[8]),r.a.createElement("br",null),"Author: ".concat(e[9])),r.a.createElement(w.a,{variant:"dark"},"View Thread")))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={loadingData:!1,alerts:[]},a.apiServer="http://socnet.pythonanywhere.com/",a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setState({loadingData:!0}),t.next=4,u.a.awrap(b.a.get("".concat(this.apiServer,"alerts")));case 4:e=t.sent,this.setState({alerts:e.data,loadingData:!1}),console.log(this.state),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error");case 12:case"end":return t.stop()}}),null,this,[[0,9]])}},{key:"render",value:function(){var e=this.state,t=e.loadingData,a=e.alerts;return t?r.a.createElement(y.a,{active:!0,inverted:!0},r.a.createElement(E.a,{size:"massive"},"Loading")):r.a.createElement("div",{className:"container"},r.a.createElement(g,{title:"Socnet"}),r.a.createElement(l.b,{to:"/createAlert"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Create Alert")),a.map((function(e){return r.a.createElement(j,{data:e,key:e[0]})})))}}]),t}(n.Component),x=a(35),S=a(316),D=a(314),C=a(148);var N=function(e){var t=e.label,a=e.type,n=e.placeholder,o=e.propChanged,c=e.values;return"undefined"!==typeof c?r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Prepend,null,r.a.createElement(D.a.Text,{id:"basic-addon1"},t)),r.a.createElement(C.a,{placeholder:n,as:a,onChange:o},r.a.createElement("option",{key:"Choose..."},"Choose..."),c.map((function(e){return r.a.createElement("option",{key:e},e)})))):r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Prepend,null,r.a.createElement(D.a.Text,{id:"basic-addon1"},t)),r.a.createElement(C.a,{placeholder:n,type:a,onChange:o}))},T=a(149),A=a.n(T),P=a(318),M=a(317),I=a(96),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).propChanged=function(e,t){var n=a.state.properties,r=e.target.value;console.log("props changed properties ",n),n[t].value=r,a.setState({payload:n})},a.handleSubmit=function(e){var t,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("event is ",a.inputNode),console.log("before payload",a.state.payload),e.preventDefault(),t=a.state.payload,n=a.props.history,Object.keys(t).map((function(e){"event_severity"===e&&"Choose..."===t[e].value?t[e]=void 0:t[e]=t[e].value})),t.event_datetime=A()((new Date).toLocaleString()).format("YYYY/MM/DD h:mm:ss"),console.log("after payload",t),r.prev=8,r.next=11,u.a.awrap(b.a.post("".concat(a.apiServer,"alerts"),t));case 11:r.sent,n.push("/"),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(8),console.log(r.t0);case 18:case"end":return r.stop()}}),null,null,[[8,15]])},a.formatItem=function(e){return e=e.includes("event")?e.substring(6,e.length):"sender's name"},a.formatType=function(e,t){return"undefined"===typeof t?"datetime"===e?"datetime-local":"text":"select"},a.state={loadingData:!1,properties:{},requiredProperties:[],payload:{}},a.apiServer="http://socnet.pythonanywhere.com/",a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setState({loadingData:!0}),t.next=4,u.a.awrap(b.a.get("".concat(this.apiServer,"form")));case 4:e=t.sent,this.setState({properties:e.data.properties,requiredProperties:e.data.required,loadingData:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error");case 11:case"end":return t.stop()}}),null,this,[[0,8]])}},{key:"render",value:function(){var e=this,t=this.state,a=t.loadingData,n=t.properties;return a?r.a.createElement(y.a,{active:!0,inverted:!0},r.a.createElement(E.a,{size:"massive"},"Loading")):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container mt-5"},r.a.createElement("style",null,"body { background-color: grey; }"),r.a.createElement(P.a,{placeholde:!0},r.a.createElement(M.a,{icon:!0},r.a.createElement(I.a,{name:"shield alternate",circular:!0}),"Please help us stay safe by entering the information about the incident you wish to report."))),r.a.createElement(S.a,{className:"container-fluid mt-4"},Object.keys(n).map((function(t){return r.a.createElement(N,{label:e.formatItem(t),type:e.formatType(n[t].type,n[t].values),placeholder:n[t].example,propChanged:function(a){return e.propChanged(a,t)},values:n[t].values,key:e.formatItem(t)})})),r.a.createElement(w.a,{variant:"dark",type:"submit",onClick:function(t){return e.handleSubmit(t)}},"Submit Alert")))}}]),t}(n.Component);var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:O}),r.a.createElement(i.a,{exact:!0,path:"/createAlert",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[162,1,2]]]);
//# sourceMappingURL=main.843118a0.chunk.js.map